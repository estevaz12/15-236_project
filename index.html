<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <link rel="stylesheet" href="styles.css" type="text/css">

        <title>What is your Carbon Footprint?</title>
    </head>
    <style>
        canvas {
          width: 600px;
          height: 400px;
        }
    </style>
    <body>
        <header>
            <nav class="navbar sticky-top navbar-expand-md navbar-dark bg-dark">
                <div class="container">
                    <a class="navbar-brand" href="#">
                        <img src="/docs/5.0/assets/brand/bootstrap-logo.svg" alt="" width="30" height="24">
                    </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">What is CF?</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Calculation</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Sources</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div id="banner">
                <h1 id="header-text">What is your Carbon Footprint?</h1>
                <img src="imgs/turbines.jpg" class="img-fluid" alt="wind-turbines" id="header-img">
            </div>
        </header>

        <div class="container" id="content">

            <div class="row" id='intro'>
                <div class="col-12">
                    <p>
                        Carbon footprint is the overall amount of greenhouse gas emissions, consisting primarily of carbon dioxide, associated
                        with an organization, event or production. It is one of the most common measures of the effect of an individual,
                        community, industry, or country on the environment. An increase in greenhouse gas emissions, and therefore in carbon
                        footprint, is the primary event associated with climate change that has led to global warming.

                        <br><br>

                        Climate change is affecting the environment, wildlife, human health, and even economies. Scroll through our page to 
                        see how much CO2 do your activities produces and what you can do about it.
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="row">
                    <h2>Public Transport</h2>
                </div>
    
                <!-- First model goes here -->
                <div class="row" id="model-row">
                    <div class="col-12">
                        <canvas id="firstModel" width="600" height="400"></canvas>
                    </div>
                </div>
    
                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">How many flights do you take per year?</h5>
                                <p class="card-text">Around 2.4% of global CO2 emissions come from aviation. Together with other gases and the water vapour trails produced
                                by aircraft, the industry is responsible for around 5% of global warming.</p>
                                <input type="number" min="0" max="150" value="2" step="1" id="transFlights">
                                <input type="range" class="form-range" min="0" max="150" value='2' id="transFlightsR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">How many miles do you travel a day by bus?</h5>
                                <p class="card-text">Moving a passenger one mile in an auto uses less energy, and produces less emissions, per passenger-mile (one person
                                traveling one mile) than carrying that person one mile in an urban transit bus.</p>
                                <input type="number" min="0" max="150" value="10" step="1" id="transBus">
                                <input type="range" class="form-range" min="0" max="150" value='10' id="transBusR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">How many miles do you travel a day by train?</h5>
                                <p class="card-text">Rail transportation emits about 0.2 pounds of greenhouse gases per passenger mile.</p>
                                <input type="number" min="0" max="150" value="10" step="1" id="transTrain">
                                <input type="range" class="form-range" min="0" max="150" value='10' id="transTrainR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">How many miles do you travel a day by car?</h5>
                                <p class="card-text">A typical passenger vehicle emits about 4.6 metric tons of carbon dioxide per year.</p>
                                <input type="number" min="0" max="150" value="45" step="1" id="transCarMiles">
                                <input type="range" class="form-range" min="0" max="150" value='45' id="transCarMilesR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">How many miles per gallon does you car get?</h5>
                                <p class="card-text">A vehicle's emissions can vary depending on the
                                vehicleâ€™s fuel, fuel economy, and the number of miles driven per year.</p>
                                <input type="number" min="0" max="150" value="25" step="1" id="transCarEff">
                                <input type="range" class="form-range" min="0" max="150" value='25' id="transCarEffR">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="row">
                    <h2>Household & Waste</h2>
                </div>

                

                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">What state do you live in?</h5>
                                <p class="card-text">Energy and natural gas rates vary per state.</p>
                                <input type="text" value="Illinois" id="houseState">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">How much do you spend on electricity and natural gas per year?</h5>
                                <p class="card-text">Residential energy use accounts for roughly 20% of greenhouse gas (GHG) emissions in the United States.</p>
                                <input type="number" min="0" max="500" value="10" step="1" id="houseBill">
                                <input type="range" class="form-range" min="0" max="500" value='10' id="houseBillR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">How much do you recycle? (tons/year)</h5>
                                <p class="card-text">Recycling helps reduce greenhouse gas emissions by reducing energy consumption. Using recycled materials to make new
                                products reduces the need for virgin materials. This avoids greenhouse gas emissions that would result from extracting
                                or mining virgin materials.</p>
                                <input type="number" min="0" max="500" value="10" step="1" id="wasteRecycle">
                                <input type="range" class="form-range" min="0" max="500" value='10' id="wasteRecycleR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">What is your monthly water bill? (dollars)</h5>
                                <p class="card-text">The CO2 embedded in the nation's water represents 5% of all U.S. carbon emissions and is equivalent to the emissions of
                                over 62 coal fired power plants.</p>
                                <input type="number" min="0" max="500" step="1" value="70" id="wasteBill">
                                <input type="range" class="form-range" min="0" max="500" value='70' id="wasteBillR">
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="row">
                    <h2>Food</h2>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"> What percent of your diet is fruits and vegetables?</h5>
                                <input type="number" min="0" max="100" value="10" step="1" id="vegetableFruitPercent">
                                <input type="range" class="form-range" min="0" max="100" value='10' id="veggieR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"> What percent of your diet is grains?</h5>
                                <input type="number" min="0" max="100" value="20" step="1" id="grainPercent">
                                <input type="range" class="form-range" min="0" max="100" value='20' id="grainR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"> What percent of your diet is nuts?</h5>
                                <input type="number" min="0" max="100" value="2" step="1" id="nutsPercent">
                                <input type="range" class="form-range" min="0" max="100" value='2' id="nutsR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"> What percent of your diet is snacks?</h5>
                                <input type="number" min="0" max="100" value="43" step="1" id="snackPercent">
                                <input type="range" class="form-range" min="0" max="100" value='43' id="snackR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"> What percent of your diet is meat?</h5>
                                <input type="number" min="0" max="100" value="15" step="1" id="meatPercent">
                                <input type="range" class="form-range" min="0" max="100" value='15' id="meatR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"> What percent of your diet is dairy?</h5>
                                <input type="number" min="0" max="100" value="10" step="1" id="dairyPercent">
                                <input type="range" class="form-range" min="0" max="100" value='10' id="dairyR">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"> How many calories do you roughly eat per day?</h5>
                                <input type="number" min="0" max="10000" value="1600" step="1" id="caloriesPerDay">
                                <input type="range" class="form-range" min="0" max="10000" value='1600' id="caloriesR">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- What are the effects -->
            <div class="row effects-row" id="effects">
                <h2>What are the effects?</h2>
                <p>If everyone on the Earth decided to live this way, the global CO2 emissions would reach X by Y.</p>
                <canvas></canvas>
            </div>

            <!-- What can you do? -->
            <div class="row can-do-row">
                <div class="row">
                    <h2>What can you do?</h2>
                </div>
                <div class="row can-do-card-row">
                    <div class="card mb-3">
                        <div class="row g-0">
                            <div class="col-3">
                                <img src="imgs/public-transport.jpg" alt="roads">
                            </div>
                            <div class="col-9">
                                <div class="card-body">
                                    <h5 class="card-title">Public Transport</h5>
                                    <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional
                                        content. This content is a little bit longer.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <footer>
            <!-- to-do -->
        </footer>


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
            crossorigin="anonymous"></script>
        <script src="script.js" type="text/javascript"></script>
        <script>
            let flightsR = document.getElementById('transFlightsR');
            let busR = document.getElementById('transBusR');
            let trainR = document.getElementById('transTrainR');
            let carMilesR = document.getElementById('transCarMilesR');
            let carEffR = document.getElementById('transCarEffR');
            let houseBillR = document.getElementById('houseBillR');
            let recycleR = document.getElementById('wasteRecycleR');
            let waterR = document.getElementById('wasteBillR');
            let veggieR = document.getElementById('veggieR');
            let meatR = document.getElementById('meatR');
            let dairyR = document.getElementById('dairyR');
            let nutsR = document.getElementById('nutsR');
            let snacksR = document.getElementById('snackR');
            let grainR = document.getElementById('grainR');
            let caloriesR = document.getElementById('caloriesR');

            let trans_numFlights = document.getElementById("transFlights");
            let trans_busMiles = document.getElementById("transBus");
            let trans_trainMiles = document.getElementById("transTrain");
            let trans_carMiles = document.getElementById("transCarMiles");
            let trans_carEfficiency = document.getElementById("transCarEff");
            // let trans_out = document.getElementById("transportOutput");


            let house_state = document.getElementById("houseState");
            let house_bill = document.getElementById("houseBill");
            // let house_out = document.getElementById("houseOutput");

            let fruitveg_percent = document.getElementById("vegetableFruitPercent");
            let meat_percent = document.getElementById("meatPercent");
            let dairy_percent = document.getElementById("dairyPercent");
            let nut_percent = document.getElementById("nutsPercent");
            let snack_percent = document.getElementById("snackPercent");
            let grain_percent = document.getElementById("grainPercent");
            let cal_per_day = document.getElementById("caloriesPerDay");
            // let food_out = document.getElementById("foodOutput");

            let waste_recycle = document.getElementById("wasteRecycle");
            let waste_bill = document.getElementById("wasteBill");
            // let waste_out = document.getElementById("wasteOutput");

            // let total_out = document.getElementById("totalOutput");

            function update() { // big
            let transport = calcTransportationCost(parseInt(trans_numFlights.value), parseInt(trans_busMiles.value),
                parseInt(trans_trainMiles.value), parseInt(trans_carMiles.value), parseInt(trans_carEfficiency.value));
            let house = directHouseEms(parseInt(house_bill.value)) + indirectHouseEms(house_state.value);
            let food = calcFood(parseInt(fruitveg_percent.value), parseInt(meat_percent.value), parseInt(dairy_percent.value),
                                parseInt(nut_percent.value), parseInt(snack_percent.value), parseInt(grain_percent.value),
                                parseInt(cal_per_day.value));
            let waste = wasteEms(parseInt(waste_recycle.value), parseInt(waste_bill.value) * 12.0);
            console.log("Total: " + (transport + house + food + waste));
            let cnvs = document.getElementById("firstModel");
            //https://www.tutorialrepublic.com/faq/how-to-detect-screen-resolution-with-javascript.php
            if(cnvs.height == 400 && cnvs.width == 600) {
                cnvs.height = cnvs.height * window.devicePixelRatio;
                cnvs.width = cnvs.width * window.devicePixelRatio;
            }
            console.log("width: " + cnvs.width + ", height: " + cnvs.height);
            drawBarChart(cnvs, transport, house, food, waste);
            }

            function updateInput(){
                trans_numFlights.value = flightsR.value;
                trans_busMiles.value = busR.value;
                trans_trainMiles.value = trainR.value;
                trans_carMiles.value = carMilesR.value;
                trans_carEfficiency.value = carEffR.value;
                house_bill.value = houseBillR.value;
                waste_recycle.value = recycleR.value;
                waste_bill.value = waterR.value;
                fruitveg_percent.value = veggieR.value;
                meat_percent.value = meatR.value;
                dairy_percent.value = dairyR.value;
                nut_percent.value = nutsR.value;
                snack_percent.value = snacksR.value;
                grain_percent.value = grainR.value;
                cal_per_day.value = caloriesR.value;
                update();
            }

            updateInput();
            flightsR.addEventListener("input", updateInput);
            busR.addEventListener("input", updateInput);
            trainR.addEventListener("input", updateInput);
            carMilesR.addEventListener("input", updateInput);
            carEffR.addEventListener("input", updateInput);
            houseBillR.addEventListener("input", updateInput);
            recycleR.addEventListener("input", updateInput);
            waterR.addEventListener("input", updateInput);
            veggieR.addEventListener("input", updateInput);
            meatR.addEventListener("input", updateInput);
            dairyR.addEventListener("input", updateInput);
            nutsR.addEventListener("input", updateInput);
            snacksR.addEventListener("input", updateInput);
            grainR.addEventListener("input", updateInput);
            caloriesR.addEventListener("input", updateInput);

            update();
            trans_numFlights.addEventListener("input", update);
            trans_busMiles.addEventListener("input", update);
            trans_trainMiles.addEventListener("input", update);
            trans_carMiles.addEventListener("input", update);
            trans_carEfficiency.addEventListener("input", update);
            house_state.addEventListener("input", update);
            house_bill.addEventListener("input", update);
            fruitveg_percent.addEventListener("input", update);
            meat_percent.addEventListener("input", update);
            dairy_percent.addEventListener("input", update);
            nut_percent.addEventListener("input", update);
            snack_percent.addEventListener("input", update);
            grain_percent.addEventListener("input", update);
            cal_per_day.addEventListener("input", update);
            waste_recycle.addEventListener("input", update);
            waste_bill.addEventListener("input", update);
        </script>
    </body>
</html>
